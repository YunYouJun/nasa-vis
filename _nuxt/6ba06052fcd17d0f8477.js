(window.webpackJsonp=window.webpackJsonp||[]).push([[15,10],{432:function(t,e,n){"use strict";n.r(e);var r=n(16),o=(n(368),n(325)),c=n(430),l=n(428),h={type:"Sphere"},d=o.o(),f={data:function(){return{date:null,colorful:!1,width:0,height:0,address:[],beijing:[116.3,39.9]}},mounted:function(){this.setDefaultDate(),this.height=this.getHeight(),this.width=this.height,this.drawChart(),this.getEpicByDate(this.date)},methods:{setDefaultDate:function(){var t=new Date;t.setDate(t.getDate()-3);var e=o.D("%Y-%m-%d")(t);this.date=e},getEpicByDate:function(t){var e=this;this.$axios.$get("/EPIC/api/natural/date/"+t).then((function(data){e.address=[],data.forEach((function(t){var n=[t.centroid_coordinates.lon,t.centroid_coordinates.lat];e.address.push(n)}))})),this.renderEarth()},renderEarth:function(){var t=this,e=this.width,n=this.height,r=this.land,c=this.countries,l=this.context,path=this.path;l.clearRect(0,0,e,n),l.fillStyle="black";var h=o.n();l.beginPath(),l.strokeStyle="rgba(0, 0, 0, 0.08)",path(h()),l.stroke();var f=o.y(o.B);this.colorful?c.forEach((function(t){l.beginPath();var e=o.d(f(t.id));e.opacity=.9,l.fillStyle=e+"",path(t),l.fill()})):(l.beginPath(),path(r),l.fill()),l.strokeStyle="black",l.beginPath(),path({type:"Sphere"}),l.lineWidth=1,l.strokeStyle="rgba(0, 0, 0, 0.08)",l.stroke();var p=d.rotate().map((function(t){return Math.floor(10*t)/10}));l.fillText("λ = ".concat(p[0],", φ = ").concat(p[1],", γ = ").concat(p[2]),10,10),this.address.forEach((function(e){l.beginPath(),l.fillStyle=t.colorful?"black":"red",path({type:"Feature",geometry:{type:"Point",coordinates:e}}),l.fill()}))},drawChart:function(){var t=this,e=this.width,n=this.height,canvas=o.C("#map-container").append("canvas").attr("width",e).attr("height",n),r=canvas.node().getContext("2d"),path=o.p().projection(d).context(r);this.context=r,this.path=path;var h=function(){};o.s("https://cdn.jsdelivr.net/npm/world-atlas@latest/world/110m.json").then((function(e){var n=c.a(e,e.objects.land),r=c.a(e,e.objects.countries).features;t.land=n,t.countries=r,d.rotate([30,-30]),(h=function(){t.renderEarth()})()})),Object(l.a)(canvas,(function(){h()}),d)},getHeight:function(){var t=o.p(d.fitWidth(500,h)).bounds(h),e=Object(r.a)(t,2),n=Object(r.a)(e[0],2),c=n[0],l=n[1],f=Object(r.a)(e[1],2),v=f[0],w=f[1],y=Math.ceil(w-l),k=Math.min(Math.ceil(v-c),y);return d.scale(d.scale()*(k-1)/k).precision(.2),y}},head:function(){return{title:this.$t("epic.title")}}},v=n(64),w=n(88),y=n.n(w),k=n(327),m=n(558),x=n(571),j=n(560),C=n(570),component=Object(v.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-row",[n("v-col",{staticClass:"text-center",attrs:{cols:"12",md:"3"}},[n("v-date-picker",{attrs:{"first-day-of-week":0,locale:this.$store.state.locale},on:{change:function(e){return t.getEpicByDate(t.date)}},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),t._v(" "),n("v-col",{staticClass:"text-center",attrs:{cols:"12",md:"9"}},[n("v-card",{staticClass:"pa-2"},[n("v-switch",{attrs:{label:"With Color"},on:{change:t.renderEarth},model:{value:t.colorful,callback:function(e){t.colorful=e},expression:"colorful"}}),t._v(" "),n("div",{staticClass:"text-center",attrs:{id:"map-container"}})],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;y()(component,{VCard:k.a,VCol:m.a,VDatePicker:x.a,VRow:j.a,VSwitch:C.a})},576:function(t,e,n){"use strict";n.r(e);var r=n(432).default,o=n(64),component=Object(o.a)(r,void 0,void 0,!1,null,null,null);e.default=component.exports}}]);